* 6-Stage Cascaded CMOS Inverter Chain

.incl tsmc18.sp

* Parameters
.param Wp=0.75u
.param Lp=0.2u
.param Wn=0.5u
.param Lnch=0.2u
.param Cl=10pf
.param m=1.34

* Power supply
VDD vdd 0 1.8

* Input pulse
Vin in 0 PULSE(0 1.8 100p 10p 10p 100n 200n)

* Inverter 1
M1_1 n1 in vdd vdd cmosp W={Wp} L={Lp} ad='Wp*0.55u' as='Wp*0.55u' pd='2*(Wp+0.55u)' ps='2*(Wp+0.55u)'
M2_1 n1 in 0 0 cmosn W={Wn} L={Lnch} ad='Wn*0.55u' as='Wn*0.55u' pd='2*(Wn+0.55u)' ps='2*(Wn+0.55u)'

.param wp2=2.3u
.param wn2=1.54u
* Inverter 2
M1_2 n2 n1 vdd vdd cmosp W={wp2} L={Lp} ad='wp2*0.55u' as='wp2*0.55u' pd='2*(wp2+0.55u)' ps='2*(wp2+0.55u)'
M2_2 n2 n1 0 0 cmosn W={wn2} L={Lnch} ad='wn2*0.55u' as='wn2*0.55u' pd='2*(wn2+0.55u)' ps='2*(wn2+0.55u)'

.param wp3=4.71u
.param wn3=7.09u
* Inverter 3
M1_3 n3 n2 vdd vdd cmosp W={wp3} L={Lp} ad='wp3*0.55u' as='wp3*0.55u' pd='2*(wp3+0.55u)' ps='2*(wp3+0.55u)'
M2_3 n3 n2 0 0 cmosn W={wn3} L={Lnch} ad='wn3*0.55u' as='wn3*0.55u' pd='2*(wn3+0.55u)' ps='2*(wn3+0.55u)'

.param wp4=21.77u
.param wn4=14.47u
* Inverter 4
M1_4 n4 n3 vdd vdd cmosp W={wp4} L={Lp} ad='wp4*0.55u' as='wp4*0.55u' pd='2*(wp4+0.55u)' ps='2*(wp4+0.55u)'
M2_4 n4 n3 0 0 cmosn W={wn4} L={Lnch} ad='wn4*0.55u' as='wn4*0.55u' pd='2*(wn4+0.55u)' ps='2*(wn4+0.55u)'

.param wp5=66.84u
.param wn5=44.41u
* Inverter 5
M1_5 n5 n4 vdd vdd cmosp W={wp5} L={Lp} ad='wp5*0.55u' as='wp5*0.55u' pd='2*(wp5+0.55u)' ps='2*(wp5+0.55u)'
M2_5 n5 n4 0 0 cmosn W={wn5} L={Lnch} ad='wn5*0.55u' as='wn5*0.55u' pd='2*(wn5+0.55u)' ps='2*(wn5+0.55u)'

.param wp6=205.20u
.param wn6=136.35u
* Inverter 6
M1_6 n6 n5 vdd vdd cmosp W={wp6} L={Lp} ad='wp6*0.55u' as='wp6*0.55u' pd='2*(wp6+0.55u)' ps='2*(wp6+0.55u)'
M2_6 n6 n5 0 0 cmosn W={wn6} L={Lnch} ad='wn6*0.55u' as='wn6*0.55u' pd='2*(wn6+0.55u)' ps='2*(wn6+0.55u)'

.param wp7=629.99u
.param wn7=418.6u
* Inverter 7
M1_7 out n6 vdd vdd cmosp W={wp7} L={Lp} ad='wp7*0.55u' as='wp7*0.55u' pd='2*(wp7+0.55u)' ps='2*(wp7+0.55u)'
M2_7 out n6 0 0 cmosn W={wn7} L={Lnch} ad='wn7*0.55u' as='wn7*0.55u' pd='2*(wn7+0.55u)' ps='2*(wn7+0.55u)'


* Load Capacitance
Cload out 0 {Cl}

* Simulation control
*.tran 5p 200n

* Propagation delay measurements (optional)
*.measure tran tplh TRIG V(in) VAL=0.9 RISE=1 TARG V(out) VAL=0.9 RISE=1
*.measure tran tphl TRIG V(in) VAL=0.9 FALL=1 TARG V(out) VAL=0.9 FALL=1

.control
tran 5p 200n
plot v(in) v(out)
meas tran tphl TRIG v(in) VAL=0.9 RISE=1 TARG v(out) VAL=0.9 FALL=1
meas tran tplh TRIG v(in) VAL=0.9 FALL=1 TARG v(out) VAL=0.9 RISE=1

.endc
.end
